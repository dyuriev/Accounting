<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Бюджет семьи Юрьевых</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,500,700&subset=latin,cyrillic,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link href="css/datepicker3.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>

<body>
<div class="container-fluid">
    <div class="row mainrow">
    <div class="col-xs-12">
    <div class="row">
        <nav class="navbar navbar-default navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Развернуть меню</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">Бюджет</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">Доходы и расходы <span class="sr-only">(current)</span></a></li>
                        <li><a href="#">Отчеты</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Справочники <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Статьи доходов</a></li>
                                <li><a href="#">Статьи расходов</a></li>
                                <li><a href="#">Пользователи</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">Выход</a></li>
                    </ul>
                </div>
            </div><!-- /.container-fluid -->
        </nav>
    </div>
    </div>
    <div class="col-xs-12">

        <div class="well-budget" data-example-id="togglable-tabs">
            <ul id="budgetTabs" class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#profit" id="profit-tab" role="tab" data-toggle="tab" aria-controls="profit" aria-expanded="true">Доходы</a></li>
                <li role="presentation" class=""><a href="#expense" role="tab" id="expense-tab" data-toggle="tab" aria-controls="expense" aria-expanded="false">Расходы</a></li>
                <li role="presentation" class="dropdown" style="display: none;">
                    <a href="#" id="budgetTabsDrop" class="dropdown-toggle" data-toggle="dropdown" aria-controls="budgetTabsDropContents" aria-expanded="false">Добавить <span class="caret"></span></a>
                    <ul class="dropdown-menu" aria-labelledby="myTabDrop1" id="budgetTabsDropContents">
                        <li class=""><a href="#addprofit" role="tab" id="addprofit-tab" data-toggle="tab" aria-controls="addprofit" aria-expanded="false">+ доход</a></li>
                        <li><a href="#addexpense" role="tab" id="addexpense-tab" data-toggle="tab" aria-controls="addexpense" aria-expanded="false">- расход</a></li>
                    </ul>
                </li>
                <li role="presentation" class="dropdown">
                    <a href="#" id="budgetTabsDrop1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="budgetTabsDropContents1" aria-expanded="false">Справочники <span class="caret"></span></a>
                    <ul class="dropdown-menu" aria-labelledby="myTabDrop2" id="budgetTabsDropContents1">
                        <li><a href="#profitsources" role="tab" id="profitsources-tab" data-toggle="tab" aria-controls="profitsources" aria-expanded="false">Источники дохода</a></li>
                        <li><a href="#expensetargets" role="tab" id="expensetargets-tab" data-toggle="tab" aria-controls="expensetargets" aria-expanded="false">Цели расходов</a></li>
                    </ul>
                </li>
            </ul>

            <div id="budgetTabsContent" class="tab-content">
                <div role="tabpanel" class="tab-pane fade active in" id="profit" aria-labelledby="profit-tab">
                    <div class="pull-right">
                        <button class="btn btn-success btn-sm btn-add" id="btnAddProfit"><i class="fa fa-plus"></i> Добавить поступление</button>
                    </div>
                    <div id="table-profits-div">
                        <!-- Table of profits-->
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="expense" aria-labelledby="expense-tab">
                    <div class="pull-right">
                        <button class="btn btn-danger btn-sm btn-add" id="btnAddExpense"><i class="fa fa-minus"></i> Добавить расход</button>
                    </div>
                    <div id="table-expenses-div">
                        <!-- Table of expenses-->
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="addprofit" aria-labelledby="addprofit">
                    <h3>Добавление дохода</h3>
                    <hr>
                    <form id="profitAddForm" data-checker-validate="true" enctype="application/x-www-form-urlencoded">
                        <div class="form-group">
                            <label class="required-filed" for="profit-source">Источник дохода</label>
                            <select class="form-control" id="profit-source" name="profit-source" data-checker-rules="required">
                                <!-- Dynamic sources list -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="required-filed" for="profit-amount">Сумма</label>
                            <input type="text" class="form-control" id="profit-amount" name="profit-amount" placeholder="100.00" data-checker-rules="required,numeric">
                        </div>
                        <div class="form-group">
                            <label class="required-filed" for="profit-date">Дата поступления</label>
                            <div class="input-group date">
                                <input type="text" class="form-control" id="profit-date" name="profit-date" data-checker-rules="required,rusdate"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="profit-comment">Комментарий</label>
                            <textarea name="profit-comment" id="profit-comment" class="full-width"></textarea>
                        </div>
                        <button type="submit" class="btn btn-info btn-sm btn-add-profit"><i class="fa fa-check"></i> Сохранить</button>
                        <button class="btn btn-default btn-sm btn-return-profit"><i class="fa fa-reply"></i> Вернуться</button>
                    </form>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="addexpense" aria-labelledby="addexpense">
                    <h3>Добавление расхода</h3>
                    <hr>
                    <form id="expenseAddForm" data-checker-validate="true" enctype="application/x-www-form-urlencoded">
                        <div class="form-group">
                            <label class="required-filed" for="expense-target">Статья расходов</label>
                            <select class="form-control" id="expense-target" name="expense-target" data-checker-rules="required">
                                <!-- Dynamic expenses list -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="required-filed" for="expense-amount">Сумма</label>
                            <input type="text" class="form-control" id="expense-amount" name="expense-amount" placeholder="100.00" data-checker-rules="required,numeric">
                        </div>
                        <div class="form-group">
                            <label class="required-filed" for="expense-date">Дата расходования</label>
                            <div class="input-group date">
                                <input type="text" class="form-control" id="expense-date" name="expense-date" data-checker-rules="required,rusdate"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expense-comment">Комментарий</label>
                            <textarea name="expense-comment" id="expense-comment" class="full-width"></textarea>
                        </div>
                        <button type="submit" class="btn btn-info btn-sm btn-add-expense"><i class="fa fa-check"></i> Сохранить</button>
                        <button class="btn btn-default btn-sm btn-return-expense"><i class="fa fa-reply"></i> Вернуться</button>
                    </form>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="profitsources" aria-labelledby="profitsources">
                    <div class="pull-right">
                        <button class="btn btn-success btn-sm btn-add" id="btnAddProfitSource"><i class="fa fa-plus"></i> Добавить источник доходов</button>
                    </div>
                    <div id="table-profitsources-div">
                        <!-- Table of profit`s sources -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div><!-- /.container-fluid -->
<!-- ######################### End of main layout ################################# -->

<!-- ######################### HTML JS Templates ########################## -->
<script type="text/html" id="tpl-table-profits">
    <table class="table table-striped table-bordered table-list active-table" id="profitsTable">
    <thead>
    <tr>
        <th class="th-sorted-column th-id" data-sort-type="timestamp">Дата</th>
        <th class="th-sorted-column" data-sort-type="source">Источник</th>
        <th class="th-sorted-column" data-sort-type="amount">Сумма</th>
        <th class="td-hidden-portrait">Действия</th>
    </tr>
    </thead>
    <tbody>
    <% if (collection && collection.length > 0) { %>
        <% _.each(collection, function(item) { %>
        <tr>
            <td><%- DYURIEV.Helpers.formatDate(new Date(item.date)) %></td>
            <td><%- item.source %></td>
            <td><%- DYURIEV.Helpers.formatMoney(item.amount) %></td>
            <td class="td-hidden-portrait">
                <button class="btn btn-default btn-xs btn-info btn-edit-item" data-item-id="<%- item.id %>"><i class="fa fa-edit"></i></button>
                <button class="btn btn-default btn-xs btn-danger btn-delete-item" data-item-id="<%- item.id %>"><i class="fa fa-remove"></i></button>
            </td>
        </tr>
        <% }); %>
    <% } else { %>
        <tr>
            <td colspan="4">Нет записей для отображения</td>
        </tr>
    <% } %>
    </tbody>
    </table>
</script>

<script type="text/html" id="tpl-table-expenses">
    <table class="table table-striped table-bordered table-list active-table" id="expensesTable">
        <thead>
        <tr>
            <th class="th-sorted-column th-id" data-sort-type="timestamp">Дата</th>
            <th class="th-sorted-column" data-sort-type="target">Цель</th>
            <th class="th-sorted-column" data-sort-type="amount">Сумма</th>
            <th class="td-hidden-portrait">Действия</th>
        </tr>
        </thead>
        <tbody>
        <% if (collection && collection.length > 0) { %>
        <% _.each(collection, function(item) { %>
        <tr>
            <td><%- DYURIEV.Helpers.formatDate(new Date(item.date)) %></td>
            <td><%- item.target %></td>
            <td><%- DYURIEV.Helpers.formatMoney(item.amount) %></td>
            <td class="td-hidden-portrait">
                <button class="btn btn-default btn-xs btn-info btn-edit-item" data-item-id="<%- item.id %>"><i class="fa fa-edit"></i></button>
                <button class="btn btn-default btn-xs btn-danger btn-delete-item" data-item-id="<%- item.id %>"><i class="fa fa-remove"></i></button>
            </td>
        </tr>
        <% }); %>
        <% } else { %>
        <tr>
            <td colspan="4">Нет записей для отображения</td>
        </tr>
        <% } %>
        </tbody>
    </table>
</script>
<!-- закончил на этой таблице. Нужно перебите все значения по умолчанию и завести в коде -->
<script type="text/html" id="tpl-table-profit-sources">
    <table class="table table-striped table-bordered table-list active-table" id="profitSourcesTable">
        <thead>
        <tr>
            <th class="th-sorted-column" data-sort-type="timestamp">Дата добавления</th>
            <th class="th-sorted-column" data-sort-type="target">Источник дохода</th>
            <th class="th-sorted-column" data-sort-type="amount">Сумма по умолчанию</th>
            <th class="td-hidden-portrait">Действия</th>
        </tr>
        </thead>
        <tbody>
        <% if (collection && collection.length > 0) { %>
            <% _.each(collection, function(item) { %>
                <tr>
                    <td><%- DYURIEV.Helpers.formatDate(new Date(item.date)) %></td>
                    <td><%- item.name %></td>
                    <td><%- DYURIEV.Helpers.formatMoney(item.amount) %></td>
                    <td class="td-hidden-portrait">
                        <button class="btn btn-default btn-xs btn-info btn-edit-item" data-item-id="<%- item.id %>"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-default btn-xs btn-danger btn-delete-item" data-item-id="<%- item.id %>"><i class="fa fa-remove"></i></button>
                    </td>
                </tr>
            <% }); %>
        <% } else { %>
            <tr>
                <td colspan="4">Нет записей для отображения</td>
            </tr>
        <% } %>
        </tbody>
    </table>
</script>

<script type="text/html" id="ul-errors-block">
    <ul class="checker-error-list" style="display: block;">
        <% _.each(fieldErrors, function(error) { %>
        <li><%- error %></li>
        <% }); %>
    </ul>
</script>

<script type="text/html" id="tpl-profit-sources">
    <option selected="selected" disabled="disabled" value="default">Выберите</option>
    <% _.each(profitSources, function(source) { %>
        <option value="<%- source.name %>"><%- source.name %></option>
    <% }); %>
</script>

<script type="text/html" id="tpl-expense-targets">
    <option selected="selected" disabled="disabled" value="default">Выберите</option>
    <% _.each(expenseTargets, function(target) { %>
    <option value="<%- target.name %>"><%- target.name %></option>
    <% }); %>
</script>

<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/lodash.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/bootstrap-datepicker.ru.js"></script>

<script src="js/libs/DYURIEV/init.js"></script>
<script src="js/libs/DYURIEV/Helpers/helpers.js"></script>
<script src="js/libs/DYURIEV/Checker/checker.js"></script>
<script src="js/libs/DYURIEV/ObjectStorage/objectstorage.js"></script>
<script src="js/app.js"></script>
</body>
</html>
